#pragma once
#include <cstdio>

#include <rsl/format>
#include <rsl/style/terminal.hpp>

#include <rsl/_impl/platform/io.hpp>

namespace rsl {
using rsl::_impl_platform::isatty;

template <typename... Args>
void println(rsl::format_string<Args...> fmt, Args&&... args) {
  auto result = rsl::format(fmt, std::forward<Args>(args)...);
  if (rsl::isatty(STDOUT_FILENO)) {
    auto colorized = result.with_style(style::Terminal());
    std::puts(colorized.c_str());
  } else {
    std::puts(result.unstyled().c_str());
  }
}
}